'use strict';var app=require('nuxt/app'),vue=require('vue');var v=async(e,t)=>{let r=typeof t=="function"?await t(e):t;if(r)return e.scheme==="bearer"?`Bearer ${r}`:e.scheme==="basic"?`Basic ${btoa(r)}`:r},k=(e,t,r)=>{typeof r=="string"?e.append(t,r):e.append(t,JSON.stringify(r));},C=(e,t,r)=>{if(t!=null){if(typeof t=="string"||t instanceof Blob)return e.append(r??"key",t);if(typeof t!="object")return e.append(r??"key",JSON.stringify(t));if(Array.isArray(t)){t.forEach((s,a)=>{C(e,s,r?`${r}[${a}]`:`array[${a}]`);});return}for(let[s,a]of Object.entries(t))C(e,a,r?`${r}[${s}]`:s);}},F={bodySerializer:e=>{let t=new FormData;return C(t,e),t}},S={bodySerializer:e=>JSON.stringify(e,(t,r)=>typeof r=="bigint"?r.toString():r)},N={bodySerializer:e=>{let t=new URLSearchParams;return Object.entries(e).forEach(([r,s])=>{s!=null&&(Array.isArray(s)?s.forEach(a=>k(t,r,a)):k(t,r,s));}),t.toString()}},I=e=>{switch(e){case "label":return ".";case "matrix":return ";";case "simple":return ",";default:return "&"}},Q=e=>{switch(e){case "form":return ",";case "pipeDelimited":return "|";case "spaceDelimited":return "%20";default:return ","}},V=e=>{switch(e){case "label":return ".";case "matrix":return ";";case "simple":return ",";default:return "&"}},z=({allowReserved:e,explode:t,name:r,style:s,value:a})=>{if(!t){let i=(e?a:a.map(u=>encodeURIComponent(u))).join(Q(s));switch(s){case "label":return `.${i}`;case "matrix":return `;${r}=${i}`;case "simple":return i;default:return `${r}=${i}`}}let n=I(s),o=a.map(i=>s==="label"||s==="simple"?e?i:encodeURIComponent(i):p({allowReserved:e,name:r,value:i})).join(n);return s==="label"||s==="matrix"?n+o:o},p=({allowReserved:e,name:t,value:r})=>{if(r==null)return "";if(typeof r=="object")throw new Error("Deeply-nested arrays/objects aren\u2019t supported. Provide your own `querySerializer()` to handle these.");return `${t}=${e?r:encodeURIComponent(r)}`},x=({allowReserved:e,explode:t,name:r,style:s,value:a})=>{if(a instanceof Date)return `${r}=${a.toISOString()}`;if(s!=="deepObject"&&!t){let i=[];Object.entries(a).forEach(([l,d])=>{i=[...i,l,e?d:encodeURIComponent(d)];});let u=i.join(",");switch(s){case "form":return `${r}=${u}`;case "label":return `.${u}`;case "matrix":return `;${r}=${u}`;default:return u}}let n=V(s),o=Object.entries(a).map(([i,u])=>p({allowReserved:e,name:s==="deepObject"?`${r}[${i}]`:i,value:u})).join(n);return s==="label"||s==="matrix"?n+o:o};var W=/\{[^{}]+\}/g,J=({path:e,url:t})=>{let r=t,s=t.match(W);if(s)for(let a of s){let n=false,o=a.substring(1,a.length-1),i="simple";o.endsWith("*")&&(n=true,o=o.substring(0,o.length-1)),o.startsWith(".")?(o=o.substring(1),i="label"):o.startsWith(";")&&(o=o.substring(1),i="matrix");let u=vue.toValue(vue.toValue(e)[o]);if(u==null)continue;if(Array.isArray(u)){r=r.replace(a,z({explode:n,name:o,style:i,value:u}));continue}if(typeof u=="object"){r=r.replace(a,x({explode:n,name:o,style:i,value:u}));continue}if(i==="matrix"){r=r.replace(a,`;${p({name:o,value:u})}`);continue}let l=encodeURIComponent(i==="label"?`.${u}`:u);r=r.replace(a,l);}return r},E=({allowReserved:e,array:t,object:r}={})=>a=>{let n=[],o=vue.toValue(a);if(o&&typeof o=="object")for(let i in o){let u=vue.toValue(o[i]);if(u!=null){if(Array.isArray(u)){n=[...n,z({allowReserved:e,explode:true,name:i,style:"form",value:u,...t})];continue}if(typeof u=="object"){n=[...n,x({allowReserved:e,explode:true,name:i,style:"deepObject",value:u,...r})];continue}n=[...n,p({allowReserved:e,name:i,value:u})];}}return n.join("&")},B=async({security:e,...t})=>{for(let r of e){let s=await v(r,t.auth);if(!s)continue;let a=r.name??"Authorization";switch(r.in){case "query":t.query||(t.query={}),vue.toValue(t.query)[a]=s;break;case "header":default:t.headers.set(a,s);break}return}},h=e=>M({baseUrl:e.baseURL,path:e.path,query:e.query,querySerializer:typeof e.querySerializer=="function"?e.querySerializer:E(e.querySerializer),url:e.url}),M=({baseUrl:e,path:t,query:r,querySerializer:s,url:a})=>{let n=a.startsWith("/")?a:`/${a}`,o=(e??"")+n;t&&(o=J({path:t,url:o}));let i=r?s(r):"";return i.startsWith("?")&&(i=i.substring(1)),i&&(o+=`?${i}`),o},O=(e,t)=>{let r={...e,...t};return r.baseURL?.endsWith("/")&&(r.baseURL=r.baseURL.substring(0,r.baseURL.length-1)),r.headers=w(e.headers,t.headers),r},w=(...e)=>{let t=new Headers;for(let r of e){if(!r||typeof r!="object")continue;let s=r;vue.isRef(s)&&(s=vue.unref(s));let a=s instanceof Headers?s.entries():Object.entries(s);for(let[n,o]of a)if(o===null)t.delete(n);else if(Array.isArray(o))for(let i of o)t.append(n,y(i));else if(o!==undefined){let i=y(o);t.set(n,typeof i=="object"?JSON.stringify(i):i);}}return t},q=(...e)=>e.reduce((t,r)=>{if(typeof r=="function")t.push(r);else if(Array.isArray(r))return t.concat(r);return t},[]),_=E({allowReserved:false,array:{explode:true,style:"form"},object:{explode:true,style:"deepObject"}}),K={"Content-Type":"application/json"},P=(e={})=>({...S,headers:K,querySerializer:_,...e}),y=e=>{if(e===null||typeof e!="object"||e instanceof Headers)return vue.isRef(e)?vue.unref(e):e;if(Array.isArray(e))return e.map(r=>y(r));if(vue.isRef(e))return y(vue.unref(e));let t={};for(let r in e)t[r]=y(e[r]);return t},g=e=>e.body&&e.bodySerializer?e.bodySerializer(e.body):e.body,$=(e,t)=>{let r=y(e);return r.body=g(r),t(h(e),r)};var re=(e={})=>{let t=O(P(),e),r=()=>({...t}),s=n=>(t=O(t,n),r()),a=({asyncDataOptions:n,composable:o,key:i,...u})=>{let l={...t,...u,$fetch:u.$fetch??t.$fetch??$fetch,headers:w(t.headers,u.headers),onRequest:q(t.onRequest,u.onRequest),onResponse:q(t.onResponse,u.onResponse)},{responseTransformer:d,responseValidator:R,security:j}=l;j&&(l.onRequest=[async({options:c})=>{await B({auth:l.auth,headers:c.headers,query:c.query,security:j});},...l.onRequest]),(d||R)&&(l.onResponse=[...l.onResponse,async({options:c,response:f})=>{c.responseType&&c.responseType!=="json"||f.ok&&(R&&await R(f._data),d&&(f._data=await d(f._data)));}]),l.body||l.headers.delete("Content-Type");let U=l.$fetch;if(o==="$fetch")return $(l,U);if(o==="useFetch"||o==="useLazyFetch"){let c=vue.reactive({body:l.body,bodySerializer:l.bodySerializer}),f=vue.ref(g(l));return l.body=f,vue.watch(c,D=>{f.value=g(D);}),o==="useLazyFetch"?app.useLazyFetch(()=>h(l),l):app.useFetch(()=>h(l),l)}let b=()=>$(l,U);if(o==="useAsyncData")return i?app.useAsyncData(i,b,n):app.useAsyncData(b,n);if(o==="useLazyAsyncData")return i?app.useLazyAsyncData(i,b,n):app.useLazyAsyncData(b,n)};return {buildUrl:h,connect:n=>a({...n,method:"CONNECT"}),delete:n=>a({...n,method:"DELETE"}),get:n=>a({...n,method:"GET"}),getConfig:r,head:n=>a({...n,method:"HEAD"}),options:n=>a({...n,method:"OPTIONS"}),patch:n=>a({...n,method:"PATCH"}),post:n=>a({...n,method:"POST"}),put:n=>a({...n,method:"PUT"}),request:a,setConfig:s,trace:n=>a({...n,method:"TRACE"})}};exports.createClient=re;exports.createConfig=P;exports.formDataBodySerializer=F;exports.jsonBodySerializer=S;exports.urlSearchParamsBodySerializer=N;//# sourceMappingURL=index.cjs.map
//# sourceMappingURL=index.cjs.map